(function(){"use strict";var t={981:function(t,e,i){t.exports=i.p+"img/章节6.1ee56c72.svg"},1507:function(t,e,i){t.exports=i.p+"img/章节8.b50800ea.svg"},1639:function(t,e,i){t.exports=i.p+"img/章节11.5c88f5ae.svg"},2758:function(t,e,i){t.exports=i.p+"img/章节5.087dda3a.svg"},2935:function(t,e,i){t.exports=i.p+"img/章节4.9e45f4ff.svg"},3354:function(t,e,i){t.exports=i.p+"img/球.952dc246.svg"},3752:function(t,e,i){t.exports=i.p+"img/章节3.652d3ec6.svg"},4062:function(t,e,i){t.exports=i.p+"img/横线.223a7928.svg"},4518:function(t,e,i){t.exports=i.p+"img/章节10.a7ab436a.svg"},5840:function(t,e,i){var n=i(5130),s=i(6768);const o={id:"app"};function r(t,e,i,n,r,a){const l=(0,s.g2)("PromptModal");return(0,s.uX)(),(0,s.CE)("div",o,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(r.currentPage))),(0,s.bF)(l,{visible:r.showPromptModal,"onUpdate:visible":e[0]||(e[0]=t=>r.showPromptModal=t),closable:!1,onConfirm:a.handlePromptConfirm,onToggleMusic:a.handleMusicToggle},null,8,["visible","onConfirm","onToggleMusic"])])}i(4114),i(8111),i(2489),i(7588);var a=i(8533),l=i(4062),c=i(3354);const h={class:"home-page"},u={class:"content",ref:"contentBox"},d={class:"text-container"},g={class:"sliding-text",ref:"slidingText"},m={class:"horizontal-line",ref:"horizontalLine"},v={src:c,alt:"globe",class:"globe-svg",ref:"globeSvg",draggable:"false"};function f(t,e,i,o,r,c){return(0,s.uX)(),(0,s.CE)("div",h,[(0,s.Lk)("div",u,[(0,s.Lk)("div",d,[(0,s.Lk)("div",g,e[10]||(e[10]=[(0,s.Lk)("img",{src:a,alt:"ORTHYMOS",class:"text-svg"},null,-1)]),512),(0,s.Lk)("div",m,e[11]||(e[11]=[(0,s.Lk)("img",{src:l,alt:"line",class:"line-svg"},null,-1)]),512),(0,s.Lk)("div",{class:"globe-container",ref:"globeContainer",onMousedown:e[0]||(e[0]=(...t)=>c.startRotate&&c.startRotate(...t)),onMousemove:e[1]||(e[1]=(...t)=>c.rotateGlobe&&c.rotateGlobe(...t)),onMouseup:e[2]||(e[2]=(...t)=>c.endRotate&&c.endRotate(...t)),onMouseleave:e[3]||(e[3]=(...t)=>c.endRotate&&c.endRotate(...t)),onTouchstart:e[4]||(e[4]=(...t)=>c.startTouchRotate&&c.startTouchRotate(...t)),onTouchmove:e[5]||(e[5]=(...t)=>c.touchRotateGlobe&&c.touchRotateGlobe(...t)),onTouchend:e[6]||(e[6]=(...t)=>c.endTouchRotate&&c.endTouchRotate(...t)),onTouchcancel:e[7]||(e[7]=(...t)=>c.endTouchRotate&&c.endTouchRotate(...t)),onDragstart:e[8]||(e[8]=(0,n.D$)(()=>{},["prevent"])),onSelectstart:e[9]||(e[9]=(0,n.D$)(()=>{},["prevent"]))},[(0,s.Lk)("img",v,null,512)],544)])],512)])}var p={name:"HomePage",data(){return{animationStarted:!1,textAnimationComplete:!1,waitForConfirmation:!0,isRotating:!1,lastMouseX:0,lastTouchX:0,rotationSpeed:0,currentRotation:0,inertiaInterval:null,inertiaDecay:.98,baseRotationSpeed:18,sensitivityFactor:.8,touchSensitivityFactor:1.2,maxRotationSpeed:12,transitionThreshold:10,isTransitioning:!1,transitionStarted:!1,transitionDuration:1800}},mounted(){this.preloadSvg(),this.initPage(),window.addEventListener("resize",this.handleResize),document.addEventListener("dragstart",this.preventDrag),V.on("startHomeAnimation",this.handleStartAnimation)},beforeUnmount(){window.removeEventListener("resize",this.handleResize),document.removeEventListener("dragstart",this.preventDrag),this.inertiaInterval&&clearInterval(this.inertiaInterval),V.off("startHomeAnimation",this.handleStartAnimation)},methods:{handleStartAnimation(){this.waitForConfirmation=!1,setTimeout(()=>{this.startAnimation()},300)},preventDrag(t){t.preventDefault()},preloadSvg(){const t=new Image;t.src=i(8533);const e=new Image;e.src=i(4062);const n=new Image;n.src=i(3354)},initPage(){this.handleResize()},handleResize(){},startAnimation(){if(this.animationStarted||this.waitForConfirmation)return;this.animationStarted=!0;const t=this.$refs.slidingText,e=this.$refs.contentBox,i=this.$refs.horizontalLine,n=this.$refs.globeContainer;requestAnimationFrame(()=>{e.classList.add("show"),setTimeout(()=>{t.classList.add("animate"),setTimeout(()=>{i.classList.add("animate"),setTimeout(()=>{n.classList.add("animate")},800)},800)},600)}),setTimeout(()=>{this.textAnimationComplete=!0},3200)},startRotate(t){if(!this.textAnimationComplete||this.isTransitioning)return;t.preventDefault(),document.body.style.userSelect="none",document.body.style.webkitUserSelect="none",document.body.style.mozUserSelect="none",document.body.style.msUserSelect="none",this.isRotating=!0,this.lastMouseX=t.clientX,this.inertiaInterval&&(clearInterval(this.inertiaInterval),this.inertiaInterval=null);const e=this.$refs.globeSvg;if(e){const t=window.getComputedStyle(e);let n;try{if(window.DOMMatrix)n=new DOMMatrix(t.transform);else{if(!window.WebKitCSSMatrix)return this.currentRotation=0,e.style.animation="none",void(e.style.transform=`rotate(${this.currentRotation}deg)`);n=new WebKitCSSMatrix(t.transform)}this.currentRotation=Math.atan2(n.b,n.a)*(180/Math.PI)}catch(i){console.warn("无法获取当前旋转角度:",i),this.currentRotation=0}e.style.animation="none",e.style.transform=`rotate(${this.currentRotation}deg)`}},rotateGlobe(t){if(!this.isRotating||this.isTransitioning)return;t.preventDefault();const e=t.clientX-this.lastMouseX;if(this.lastMouseX=t.clientX,e>0){if(this.rotationSpeed=Math.min(e*this.sensitivityFactor,this.maxRotationSpeed),this.rotationSpeed>this.transitionThreshold&&!this.transitionStarted)return void this.startPageTransition();this.currentRotation+=this.rotationSpeed;const t=this.$refs.globeSvg;t&&(t.style.transform=`rotate(${this.currentRotation}deg)`)}},endRotate(){this.isRotating&&!this.isTransitioning&&(this.isRotating=!1,document.body.style.userSelect="",document.body.style.webkitUserSelect="",document.body.style.mozUserSelect="",document.body.style.msUserSelect="",this.rotationSpeed>this.transitionThreshold&&!this.transitionStarted?this.startPageTransition():Math.abs(this.rotationSpeed)>.1?this.startInertia():this.resetOriginalAnimation())},startInertia(){this.inertiaInterval&&clearInterval(this.inertiaInterval),this.inertiaInterval=setInterval(()=>{if(this.rotationSpeed*=this.inertiaDecay,this.rotationSpeed>this.transitionThreshold&&!this.transitionStarted)return clearInterval(this.inertiaInterval),this.inertiaInterval=null,void this.startPageTransition();if(this.rotationSpeed>0){this.currentRotation+=this.rotationSpeed;const t=this.$refs.globeSvg;t&&(t.style.transform=`rotate(${this.currentRotation}deg)`)}Math.abs(this.rotationSpeed)<.1&&(clearInterval(this.inertiaInterval),this.inertiaInterval=null,this.resetOriginalAnimation())},16)},resetOriginalAnimation(){const t=this.$refs.globeSvg;if(t){const e=(this.currentRotation%360+360)%360,i=`\n          @keyframes resumeRotate {\n            0% { transform: rotate(${e}deg); }\n            100% { transform: rotate(${e+360}deg); }\n          }\n        `,n=document.createElement("style");n.type="text/css",n.innerText=i,document.head.appendChild(n),t.style.animation=`resumeRotate ${this.baseRotationSpeed}s linear infinite`}},startPageTransition(){if(this.transitionStarted)return;this.transitionStarted=!0,this.isTransitioning=!0,this.inertiaInterval&&(clearInterval(this.inertiaInterval),this.inertiaInterval=null);const t=this.$refs.slidingText,e=this.$refs.horizontalLine,i=this.$refs.globeContainer,n=this.$refs.contentBox,s=this.$refs.globeSvg;if(s){const t=(this.currentRotation%360+360)%360,e=`\n          @keyframes transitionRotate {\n            0% { transform: rotate(${t}deg); }\n            100% { transform: rotate(${t+720}deg); }\n          }\n        `,i=document.createElement("style");i.type="text/css",i.innerText=e,document.head.appendChild(i),s.style.animation=`transitionRotate ${this.transitionDuration/1e3}s linear forwards`}n.classList.add("splitting"),t.classList.add("split-up"),e.classList.add("split-up"),i.classList.add("split-down"),setTimeout(()=>{this.$root.switchPage("MainPage")},this.transitionDuration)},startTouchRotate(t){if(!this.textAnimationComplete||this.isTransitioning)return;t.preventDefault(),this.isRotating=!0,this.lastTouchX=t.touches[0].clientX,this.inertiaInterval&&(clearInterval(this.inertiaInterval),this.inertiaInterval=null);const e=this.$refs.globeSvg;if(e){const t=window.getComputedStyle(e);let n;try{if(window.DOMMatrix)n=new DOMMatrix(t.transform);else{if(!window.WebKitCSSMatrix)return this.currentRotation=0,e.style.animation="none",void(e.style.transform=`rotate(${this.currentRotation}deg)`);n=new WebKitCSSMatrix(t.transform)}this.currentRotation=Math.atan2(n.b,n.a)*(180/Math.PI)}catch(i){console.warn("无法获取当前旋转角度:",i),this.currentRotation=0}e.style.animation="none",e.style.transform=`rotate(${this.currentRotation}deg)`}},touchRotateGlobe(t){if(!this.isRotating||this.isTransitioning)return;t.preventDefault();const e=t.touches[0].clientX,i=e-this.lastTouchX;if(this.lastTouchX=e,i>0){if(this.rotationSpeed=Math.min(i*this.touchSensitivityFactor,this.maxRotationSpeed),this.rotationSpeed>this.transitionThreshold&&!this.transitionStarted)return void this.startPageTransition();this.currentRotation+=this.rotationSpeed;const t=this.$refs.globeSvg;t&&(t.style.transform=`rotate(${this.currentRotation}deg)`)}},endTouchRotate(){this.isRotating&&!this.isTransitioning&&(this.isRotating=!1,this.rotationSpeed>this.transitionThreshold&&!this.transitionStarted?this.startPageTransition():Math.abs(this.rotationSpeed)>.1?this.startInertia():this.resetOriginalAnimation())}}},b=i(1241);const T=(0,b.A)(p,[["render",f],["__scopeId","data-v-545eb2c8"]]);var S=T,C=i(4232),w=i.p+"img/标题.4e30bf6f.svg",y=i.p+"img/航标.16123769.svg",k=i.p+"img/封底.3cd600f2.svg";const R={class:"main-page"},L={class:"content"},F={class:"chapters-container"},x=["onClick"],P=["src","alt"];function D(t,e,i,n,o,r){return(0,s.uX)(),(0,s.CE)("div",R,[(0,s.Lk)("div",L,[(0,s.Lk)("div",{class:(0,C.C4)(["title-container",{animate:o.animateTitle}])},e[0]||(e[0]=[(0,s.Lk)("img",{src:w,alt:"标题",class:"title-svg"},null,-1)]),2),(0,s.Lk)("div",F,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.chapters,(t,e)=>((0,s.uX)(),(0,s.CE)("div",{key:e,class:(0,C.C4)(["chapter-item",{animate:o.animatedChapters>=e+1}]),style:(0,C.Tr)({transitionDelay:.1*e+.3+"s"}),onClick:e=>r.navigateToChapter(t.title)},[(0,s.Lk)("img",{src:t.svg,alt:t.title,class:"chapter-svg"},null,8,P)],14,x))),128))]),(0,s.Lk)("div",{class:(0,C.C4)(["footer-container",{animate:o.animateFooter}])},e[1]||(e[1]=[(0,s.Lk)("div",{class:"footer-content"},[(0,s.Lk)("img",{src:y,alt:"航标",class:"compass-svg"}),(0,s.Lk)("img",{src:k,alt:"封底",class:"footer-svg"})],-1)]),2)])])}var I={name:"MainPage",data(){return{animateTitle:!1,animatedChapters:0,animateFooter:!1,isTransitioning:!1,chapters:[{title:"章节1",svg:i(7770)},{title:"章节2",svg:i(9145)},{title:"章节3",svg:i(3752)},{title:"章节4",svg:i(2935)},{title:"章节5",svg:i(2758)},{title:"章节6",svg:i(981)},{title:"章节7",svg:i(8372)},{title:"章节8",svg:i(1507)},{title:"章节9",svg:i(6866)},{title:"章节10",svg:i(4518)},{title:"章节11",svg:i(1639)}]}},mounted(){setTimeout(()=>{this.animateTitle=!0},200);let t=600;for(let e=1;e<=this.chapters.length;e++)setTimeout(()=>{this.animatedChapters=e},t+100*e);setTimeout(()=>{this.animateFooter=!0},t+100*this.chapters.length+300)},methods:{navigateToChapter(t){if(!this.isTransitioning&&"章节3"===t){this.isTransitioning=!0;const t=600,e=60,i=document.querySelectorAll(".chapter-item"),n=Array.from(i),s=(n.length-1)*e,o=document.querySelector(".footer-container");o&&(o.classList.add("exit-down"),o.style.transitionDelay="0ms");for(let a=n.length-1;a>=0;a--){const t=(n.length-1-a)*e;n[a].classList.add("exit-left"),n[a].style.transitionDelay=`${t}ms`}setTimeout(()=>{const t=document.querySelector(".title-container");t&&(t.classList.add("exit-up"),t.style.transitionDelay="0ms")},s);const r=t+s+20;setTimeout(()=>{this.$parent.switchPage("Chapter3Page"),this.isTransitioning=!1,setTimeout(()=>{const t=document.querySelector(".title-container");t&&t.classList.remove("exit-up"),o&&o.classList.remove("exit-down"),i.forEach(t=>{t.classList.remove("exit-left"),t.style.transitionDelay=""})},50)},r)}}}};const M=(0,b.A)(I,[["render",D],["__scopeId","data-v-24fe4ec8"]]);var E=M;const $={class:"prompt-modal"},X={class:"prompt-content"},A={class:"setting-item"},z={class:"setting-item"},O={class:"prompt-footer"};function q(t,e,i,o,r,a){return i.visible?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,C.C4)(["prompt-modal-container",{"fade-in":r.fadeIn}])},[(0,s.Lk)("div",{class:"overlay",onClick:e[0]||(e[0]=(0,n.D$)((...t)=>a.closeIfClickable&&a.closeIfClickable(...t),["self"]))}),(0,s.Lk)("div",$,[e[8]||(e[8]=(0,s.Lk)("div",{class:"prompt-header"},[(0,s.Lk)("h2",null,"温馨提示")],-1)),(0,s.Lk)("div",X,[(0,s.Lk)("div",A,[e[5]||(e[5]=(0,s.Lk)("span",{class:"setting-label"},"是否全屏显示",-1)),(0,s.Lk)("div",{class:(0,C.C4)(["toggle-switch",{active:r.isFullscreen}]),onClick:e[1]||(e[1]=(...t)=>a.toggleFullscreen&&a.toggleFullscreen(...t))},e[4]||(e[4]=[(0,s.Lk)("div",{class:"toggle-handle"},null,-1)]),2)]),(0,s.Lk)("div",z,[e[7]||(e[7]=(0,s.Lk)("span",{class:"setting-label"},"是否开启音乐",-1)),(0,s.Lk)("div",{class:(0,C.C4)(["toggle-switch",{active:r.musicEnabled}]),onClick:e[2]||(e[2]=(...t)=>a.toggleMusic&&a.toggleMusic(...t))},e[6]||(e[6]=[(0,s.Lk)("div",{class:"toggle-handle"},null,-1)]),2)])]),(0,s.Lk)("div",O,[(0,s.Lk)("button",{class:"confirm-button",onClick:e[3]||(e[3]=(...t)=>a.confirm&&a.confirm(...t))},"确认")])])],2)):(0,s.Q3)("",!0)}var B={name:"PromptModal",props:{visible:{type:Boolean,default:!0},closable:{type:Boolean,default:!0}},emits:["update:visible","confirm","toggle-music"],data(){return{isFullscreen:!1,musicEnabled:!1,fadeIn:!1}},watch:{visible(t){t?setTimeout(()=>{this.fadeIn=!0},50):this.fadeIn=!1}},mounted(){document.addEventListener("fullscreenchange",this.handleFullscreenChange),document.addEventListener("mozfullscreenchange",this.handleFullscreenChange),document.addEventListener("webkitfullscreenchange",this.handleFullscreenChange),document.addEventListener("msfullscreenchange",this.handleFullscreenChange),setTimeout(()=>{this.fadeIn=!0},50),window.addEventListener("beforeunload",this.handleBeforeUnload)},beforeUnmount(){document.removeEventListener("fullscreenchange",this.handleFullscreenChange),document.removeEventListener("mozfullscreenchange",this.handleFullscreenChange),document.removeEventListener("webkitfullscreenchange",this.handleFullscreenChange),document.removeEventListener("msfullscreenchange",this.handleFullscreenChange),window.removeEventListener("beforeunload",this.handleBeforeUnload)},methods:{toggleFullscreen(){this.isFullscreen=!this.isFullscreen,this.isFullscreen?this.enterFullscreen():this.exitFullscreen()},toggleMusic(){this.musicEnabled=!this.musicEnabled,this.$emit("toggle-music",this.musicEnabled)},confirm(){this.fadeIn=!1,setTimeout(()=>{this.$emit("confirm",{fullscreen:this.isFullscreen,music:this.musicEnabled}),this.$emit("update:visible",!1)},300)},closeIfClickable(){this.closable&&(this.fadeIn=!1,setTimeout(()=>{this.$emit("update:visible",!1)},300))},enterFullscreen(){const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},exitFullscreen(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},checkFullscreen(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},handleFullscreenChange(){this.isFullscreen=this.checkFullscreen()},handleBeforeUnload(){localStorage.setItem("appSettings",JSON.stringify({fullscreen:this.isFullscreen,music:this.musicEnabled}))}}};const U=(0,b.A)(B,[["render",q],["__scopeId","data-v-309eadcb"]]);var W=U,_=i.p+"img/书封.92270bb0.svg";const H={class:"chapter3-page"},j={class:"content"};function G(t,e,i,n,o,r){return(0,s.uX)(),(0,s.CE)("div",H,[(0,s.Lk)("div",j,[(0,s.Lk)("div",{class:(0,C.C4)(["book-cover-container",{animate:o.animateBookCover}]),style:(0,C.Tr)({transform:`translateX(${o.bookCoverPosition}px)`}),onMousedown:e[0]||(e[0]=(...t)=>r.startDrag&&r.startDrag(...t)),onMousemove:e[1]||(e[1]=(...t)=>r.dragBookCover&&r.dragBookCover(...t)),onMouseup:e[2]||(e[2]=(...t)=>r.endDrag&&r.endDrag(...t)),onMouseleave:e[3]||(e[3]=(...t)=>r.endDrag&&r.endDrag(...t)),onTouchstart:e[4]||(e[4]=(...t)=>r.startTouchDrag&&r.startTouchDrag(...t)),onTouchmove:e[5]||(e[5]=(...t)=>r.touchDragBookCover&&r.touchDragBookCover(...t)),onTouchend:e[6]||(e[6]=(...t)=>r.endTouchDrag&&r.endTouchDrag(...t)),onTouchcancel:e[7]||(e[7]=(...t)=>r.endTouchDrag&&r.endTouchDrag(...t)),ref:"bookCoverContainer"},e[8]||(e[8]=[(0,s.Lk)("img",{src:_,alt:"第三幕",class:"book-cover-svg",draggable:"false"},null,-1)]),38)])])}var K={name:"Chapter3Page",data(){return{animateBookCover:!1,isDragging:!1,startX:0,startTouchX:0,bookCoverPosition:-9999,originalPosition:0,maxLeftSlide:-50,transitionThreshold:.4,isTransitioning:!1,windowWidth:window.innerWidth}},mounted(){this.animateBookCover=!0,setTimeout(()=>{this.bookCoverPosition=0},0),window.addEventListener("resize",this.handleResize),document.addEventListener("dragstart",this.preventDrag)},beforeUnmount(){window.removeEventListener("resize",this.handleResize),document.removeEventListener("dragstart",this.preventDrag)},methods:{preventDrag(t){t.preventDefault()},handleResize(){this.windowWidth=window.innerWidth},goBack(){this.isTransitioning||(this.isTransitioning=!0,this.$root.switchPage("MainPage"))},startDrag(t){this.isTransitioning||(this.isDragging=!0,this.startX=t.clientX,this.originalPosition=this.bookCoverPosition,document.body.style.userSelect="none",document.body.style.webkitUserSelect="none")},dragBookCover(t){if(!this.isDragging||this.isTransitioning)return;const e=t.clientX-this.startX;let i=this.originalPosition+e;i<this.maxLeftSlide&&(i=this.maxLeftSlide),this.bookCoverPosition=i,i>this.windowWidth*this.transitionThreshold&&this.triggerReturnAnimation()},endDrag(){this.isDragging&&!this.isTransitioning&&(this.isDragging=!1,document.body.style.userSelect="",document.body.style.webkitUserSelect="",this.bookCoverPosition<this.windowWidth*this.transitionThreshold&&this.resetPosition())},startTouchDrag(t){this.isTransitioning||(this.isDragging=!0,this.startTouchX=t.touches[0].clientX,this.originalPosition=this.bookCoverPosition)},touchDragBookCover(t){if(!this.isDragging||this.isTransitioning)return;t.preventDefault();const e=t.touches[0].clientX-this.startTouchX;let i=this.originalPosition+e;i<this.maxLeftSlide&&(i=this.maxLeftSlide),this.bookCoverPosition=i,i>this.windowWidth*this.transitionThreshold&&(console.log("触摸拖动达到返回阈值"),this.triggerReturnAnimation())},endTouchDrag(){this.isDragging&&!this.isTransitioning&&(this.isDragging=!1,this.bookCoverPosition<this.windowWidth*this.transitionThreshold?this.resetPosition():this.triggerReturnAnimation())},resetPosition(){const t=this.$refs.bookCoverContainer;t&&(t.style.transition="transform 0.8s cubic-bezier(0.215, 0.61, 0.355, 1)",setTimeout(()=>{this.bookCoverPosition=0,setTimeout(()=>{t.style.transition=""},800)},10))},triggerReturnAnimation(){if(this.isTransitioning)return;this.isTransitioning=!0;const t=this.$refs.bookCoverContainer;console.log("触发返回动画"),t&&(t.style.transition="transform 1.2s cubic-bezier(0.19, 1, 0.22, 1)",this.bookCoverPosition=this.windowWidth,setTimeout(()=>{console.log("动画完成，准备返回主页"),this.$root.switchPage("MainPage")},1200))}}};const J=(0,b.A)(K,[["render",G],["__scopeId","data-v-362c0df8"]]);var N=J;const V={events:{},emit(t,e){this.events[t]&&this.events[t].forEach(t=>t(e))},on(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},off(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(t=>t!==e))}};var Q={name:"App",components:{HomePage:S,MainPage:E,PromptModal:W,Chapter3Page:N},data(){return{currentPage:"HomePage",showPromptModal:!0,settingsConfig:{fullscreen:!1,music:!1},userInteracted:!1}},mounted(){this.loadSavedSettings(),document.addEventListener("visibilitychange",this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)},methods:{switchPage(t){this.currentPage=t},handlePromptConfirm(t){this.userInteracted=!0,this.settingsConfig=t,this.showPromptModal=!1,this.saveSettings(),this.settingsConfig.fullscreen&&this.requestFullscreen(),V.emit("startHomeAnimation")},handleMusicToggle(t){this.settingsConfig.music=t},handleVisibilityChange(){"visible"===document.visibilityState&&this.loadSavedSettings()},saveSettings(){localStorage.setItem("appSettings",JSON.stringify({fullscreen:this.settingsConfig.fullscreen,music:this.settingsConfig.music,welcomed:!0}))},loadSavedSettings(){try{const t=localStorage.getItem("appSettings");if(t){const e=JSON.parse(t);this.settingsConfig={fullscreen:e.fullscreen||!1,music:e.music||!1},e.welcomed&&(this.showPromptModal=!1,setTimeout(()=>{V.emit("startHomeAnimation")},100))}}catch(t){console.error("加载设置时出错:",t)}},isCurrentlyFullscreen(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},requestFullscreen(){if(this.userInteracted)try{const t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}catch(t){console.warn("请求全屏失败:",t)}}}};const Y=(0,b.A)(Q,[["render",r]]);var Z=Y;(0,n.Ef)(Z).mount("#app")},6866:function(t,e,i){t.exports=i.p+"img/章节9.f6165095.svg"},7770:function(t,e,i){t.exports=i.p+"img/章节1.7008e672.svg"},8372:function(t,e,i){t.exports=i.p+"img/章节7.b4487711.svg"},8533:function(t,e,i){t.exports=i.p+"img/文字.347e3a95.svg"},9145:function(t,e,i){t.exports=i.p+"img/章节2.a700c1e1.svg"}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,i),o.exports}i.m=t,function(){var t=[];i.O=function(e,n,s,o){if(!n){var r=1/0;for(h=0;h<t.length;h++){n=t[h][0],s=t[h][1],o=t[h][2];for(var a=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every(function(t){return i.O[t](n[l])})?n.splice(l--,1):(a=!1,o<r&&(r=o));if(a){t.splice(h--,1);var c=s();void 0!==c&&(e=c)}}return e}o=o||0;for(var h=t.length;h>0&&t[h-1][2]>o;h--)t[h]=t[h-1];t[h]=[n,s,o]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.p="/map/"}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,o,r=n[0],a=n[1],l=n[2],c=0;if(r.some(function(e){return 0!==t[e]})){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var h=l(i)}for(e&&e(n);c<r.length;c++)o=r[c],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(h)},n=self["webpackChunkmap"]=self["webpackChunkmap"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],function(){return i(5840)});n=i.O(n)})();
//# sourceMappingURL=app.8324f7b2.js.map